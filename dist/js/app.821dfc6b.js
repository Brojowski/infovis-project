(function(t){function e(e){for(var a,s,o=e[0],l=e[1],c=e[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("film-vis")],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"grid-container"},[r("div",{attrs:{id:"header"}},[r("h1",[t._v("Film")]),r("autocomplete",{attrs:{id:"movieSearch",search:t.searchMovie},on:{submit:t.submitMovieSearch}})],1),r("div",{attrs:{id:"genreKey"}},t._l(t.categories,(function(e){return r("div",{key:e},[r("div",{style:{background:t.colorFromGenre(e)}},[t._v(" "+t._s(e)+" ")])])})),0),r("svg",{attrs:{id:"vis3"}}),r("div",{attrs:{id:"focusbox"}},[r("h1",[t._v(" "+t._s(t.focused.title)+" ")]),r("table",{staticClass:"movieDetails"},[r("tr",[t._m(0),r("td",[t._v(" "+t._s(t.focused.year)+" ")])]),r("tr",[t._m(1),r("td",[t._v(" "+t._s(t.focused.length)+" ")])]),r("tr",[t._m(2),r("td",[t._v(" "+t._s(t.focused.subject)+" ")])]),r("tr",[t._m(3),r("td",[t._v(" "+t._s(t.focused.popularity)+" ")])]),r("tr",[t._m(4),r("td",[t._v(" "+t._s(t.focused.awards)+" ")])])]),r("table",[t._m(5),r("tr",[r("th",[t._v("#Movies ")]),t._v(" "),r("td",[t._v(" "+t._s(t.dirNumMovies)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(t.atrNumMovies)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(t.atsNumMovies)+" ")])]),r("tr",[r("th",[t._v("Name ")]),t._v(" "),r("td",[t._v(" "+t._s(t.focused.director)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(t.focused.actor)+" ")]),t._v(" "),r("td",[t._v(" "+t._s(t.focused.actress)+" ")])]),r("tr",[r("th",[t._v("Genres ")]),t._v(" "),r("td",[r("svg",{attrs:{id:"dir-genre"}})]),t._v(" "),r("td",[r("svg",{attrs:{id:"atr-genre"}})]),t._v(" "),r("td",[r("svg",{attrs:{id:"ats-genre"}})])]),r("tr",[r("th",[t._v("Ratings ")]),t._v(" "),r("td",[r("svg",{attrs:{id:"dir-rate"}})]),t._v(" "),r("td",[r("svg",{attrs:{id:"atr-rate"}})]),t._v(" "),r("td",[r("svg",{attrs:{id:"ats-rate"}})])])])]),r("div",{attrs:{id:"trendsHeader"}},[r("h3",[t._v(" Hollywood Trends ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.trendFilterType,expression:"trendFilterType"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.trendFilterType=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[t._v("All Movies")]),r("option",{attrs:{value:"director"}},[t._v("Director")]),r("option",{attrs:{value:"actor"}},[t._v("Actor")]),r("option",{attrs:{value:"actor"}},[t._v("Actress")])]),r("autocomplete",{attrs:{search:t.searchTrendOptions},on:{submit:t.submitTrendSearch}})],1),r("D3LineChart",{attrs:{id:"trendsChart",config:t.trendConfig,datum:t.trendData}}),r("div",{attrs:{id:"roleHeader"}},[r("h3",[t._v(" Most Influential")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.influenceGenre,expression:"influenceGenre"}],on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.influenceGenre=e.target.multiple?r:r[0]},t.updateInfluences]}},[r("option",{attrs:{value:"overall"}},[t._v(" Overall ")]),t._l(Array.from(t.categories),(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),t._v(t._s(t.influenceGenre)+" ")]),r("div",{attrs:{id:"roleContainer"}},[r("table",[r("tr",[r("th",[t._v(" Director ")]),t._v(" "),r("td",[r("svg",{attrs:{id:"inf1"}})]),t._v(" "),r("td",{attrs:{id:"names1"}})]),r("tr",[r("th",[t._v(" Actor ")]),t._v(" "),r("td",[r("svg",{attrs:{id:"inf2"}})]),t._v(" "),r("td",{attrs:{id:"names2"}})]),r("tr",[r("th",[t._v(" Actress ")]),t._v(" "),r("td",[r("svg",{attrs:{id:"inf3"}})]),t._v(" "),r("td",{attrs:{id:"names3"}})])])])],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",[r("b",[t._v(" Year ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",[r("b",[t._v(" Length ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",[r("b",[t._v(" Subject ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",[r("b",[t._v(" Popularity ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("td",[r("b",[t._v(" Awards ")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",[r("th"),t._v(" "),r("th",[t._v(" Director ")]),t._v(" "),r("th",[t._v(" Actor ")]),t._v(" "),r("th",[t._v(" Actress ")])])}],l=(r("99af"),r("4de4"),r("a630"),r("c975"),r("d81d"),r("fb6a"),r("b0c0"),r("a9e3"),r("9129"),r("b64b"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("5698")),c=r("95bf"),u=r("2dd5"),d=(r("4160"),r("159b"),{draw:function(t,e,r){var a={radius:5,w:600,h:600,factor:1,factorLegend:.85,levels:3,maxValue:0,radians:2*Math.PI,opacityArea:.5,ToRight:5,TranslateX:80,TranslateY:30,ExtraWidthX:100,ExtraWidthY:100,color:l["j"](l["k"])};if("undefined"!==typeof r)for(var n in r)"undefined"!==typeof r[n]&&(a[n]=r[n]);a.maxValue=Math.max(a.maxValue,l["g"](e,(function(t){return l["g"](t.map((function(t){return t.value})))})));var i=e[0].map((function(t,e){return t.axis})),s=i.length,o=a.factor*Math.min(a.w/2,a.h/2),c=l["f"]("%");l["m"](t).select("svg").remove();for(var u,d=l["m"](t).append("svg").attr("width",a.w+a.ExtraWidthX).attr("height",a.h+a.ExtraWidthY).append("g").attr("transform","translate("+a.TranslateX+","+a.TranslateY+")"),f=0;f<a.levels-1;f++){var v=a.factor*o*((f+1)/a.levels);d.selectAll(".levels").data(i).enter().append("svg:line").attr("x1",(function(t,e){return v*(1-a.factor*Math.sin(e*a.radians/s))})).attr("y1",(function(t,e){return v*(1-a.factor*Math.cos(e*a.radians/s))})).attr("x2",(function(t,e){return v*(1-a.factor*Math.sin((e+1)*a.radians/s))})).attr("y2",(function(t,e){return v*(1-a.factor*Math.cos((e+1)*a.radians/s))})).attr("class","line").style("stroke","grey").style("stroke-opacity","0.75").style("stroke-width","0.3px").attr("transform","translate("+(a.w/2-v)+", "+(a.h/2-v)+")")}for(f=0;f<a.levels;f++)v=a.factor*o*((f+1)/a.levels),d.selectAll(".levels").data([1]).enter().append("svg:text").attr("x",(function(t){return v*(1-a.factor*Math.sin(0))})).attr("y",(function(t){return v*(1-a.factor*Math.cos(0))})).attr("class","legend").style("font-family","sans-serif").style("font-size","10px").attr("transform","translate("+(a.w/2-v+a.ToRight)+", "+(a.h/2-v)+")").attr("fill","#737373").text(c((f+1)*a.maxValue/a.levels));var h=0,p=d.selectAll(".axis").data(i).enter().append("g").attr("class","axis");p.append("line").attr("x1",a.w/2).attr("y1",a.h/2).attr("x2",(function(t,e){return a.w/2*(1-a.factor*Math.sin(e*a.radians/s))})).attr("y2",(function(t,e){return a.h/2*(1-a.factor*Math.cos(e*a.radians/s))})).attr("class","line").style("stroke","grey").style("stroke-width","1px"),p.append("text").attr("class","legend").text((function(t){return t})).style("font-family","sans-serif").style("font-size","11px").attr("text-anchor","middle").attr("dy","1.5em").attr("transform",(function(t,e){return"translate(0, -10)"})).attr("x",(function(t,e){return a.w/2*(1-a.factorLegend*Math.sin(e*a.radians/s))-60*Math.sin(e*a.radians/s)})).attr("y",(function(t,e){return a.h/2*(1-Math.cos(e*a.radians/s))-20*Math.cos(e*a.radians/s)})),e.forEach((function(t,e){var r=[];d.selectAll(".nodes").data(t,(function(t,e){r.push([a.w/2*(1-parseFloat(Math.max(t.value,0))/a.maxValue*a.factor*Math.sin(e*a.radians/s)),a.h/2*(1-parseFloat(Math.max(t.value,0))/a.maxValue*a.factor*Math.cos(e*a.radians/s))])})),r.push(r[0]),d.selectAll(".area").data([r]).enter().append("polygon").attr("class","radar-chart-serie"+h).style("stroke-width","2px").style("stroke",a.color(h)).attr("points",(function(t){for(var e="",r=0;r<t.length;r++)e=e+t[r][0]+","+t[r][1]+" ";return e})).style("fill",(function(t,e){return a.color(h)})).style("fill-opacity",a.opacityArea).on("mouseover",(function(t){var e="polygon."+l["m"](this).attr("class");d.selectAll("polygon").transition(200).style("fill-opacity",.1),d.selectAll(e).transition(200).style("fill-opacity",.7)})).on("mouseout",(function(){d.selectAll("polygon").transition(200).style("fill-opacity",a.opacityArea)})),h++})),h=0,e.forEach((function(t,e){var r=[];d.selectAll(".nodes").data(t).enter().append("svg:circle").attr("class","radar-chart-serie"+h).attr("r",a.radius).attr("alt",(function(t){return Math.max(t.value,0)})).attr("cx",(function(t,e){return r.push([a.w/2*(1-parseFloat(Math.max(t.value,0))/a.maxValue*a.factor*Math.sin(e*a.radians/s)),a.h/2*(1-parseFloat(Math.max(t.value,0))/a.maxValue*a.factor*Math.cos(e*a.radians/s))]),a.w/2*(1-Math.max(t.value,0)/a.maxValue*a.factor*Math.sin(e*a.radians/s))})).attr("cy",(function(t,e){return a.h/2*(1-Math.max(t.value,0)/a.maxValue*a.factor*Math.cos(e*a.radians/s))})).attr("data-id",(function(t){return t.axis})).style("fill",a.color(h)).style("fill-opacity",.9).on("mouseover",(function(t){var e=parseFloat(l["m"](this).attr("cx"))-10,r=parseFloat(l["m"](this).attr("cy"))-5;u.attr("x",e).attr("y",r).text(c(t.value)).transition(200).style("opacity",1);var a="polygon."+l["m"](this).attr("class");d.selectAll("polygon").transition(200).style("fill-opacity",.1),d.selectAll(a).transition(200).style("fill-opacity",.7)})).on("mouseout",(function(){u.transition(200).style("opacity",0),d.selectAll("polygon").transition(200).style("fill-opacity",a.opacityArea)})).append("svg:title").text((function(t){return Math.max(t.value,0)})),h++})),u=d.append("text").style("opacity",0).style("font-family","sans-serif").style("font-size","13px")}}),f={name:"FilmVis",components:{Autocomplete:c["a"],D3LineChart:u["a"]},mounted:function(){this.vis3=l["m"]("#vis3").attr("width",this.svgWidth).attr("height",this.svgHeight),this.dataGroup=this.vis3.append("g").attr("class","films data-group"),l["c"]("data/a1-film.csv",this.type).then(this.onDataLoaded),console.log(this.categories)},data:function(){var t=50;return{data:[],svgWidth:1500,svgHeight:700,pieRadius:t,xProp:"year",yProp:"popularity",colorProp:"length",vis3:null,dataGroup:null,categories:new Set,dirNumMovies:0,atrNumMovies:0,atsNumMovies:0,actors:{},actresses:{},directors:{},movieTitles:[],focused:{year:"",length:"",title:"Hover over a movie to see info",subject:"",actor:"",actress:"",director:"",popularity:"",awards:""},pie:l["h"]().sort(null),arc:l["a"]().innerRadius(0).outerRadius(t),trendFilterType:"",trendFilterValue:"",trendData:[],trendConfig:{date:{key:"when",inputFormat:"%Y",outputFormat:"%Y"},values:["Drama","Action","Comedy","War","Music","Science Fiction","Mystery","Horror","Westerns"],axis:{yTitle:!1,xTitle:!1,yFormat:".0f",xFormat:"%Y-%m-%d",yTicks:5,xTicks:3},color:{key:!1,keys:["Drama","Action","Comedy","War","Music","Science Fiction","Mystery","Horror","Westerns"],scheme:l["k"],current:"#1f77b4",default:"#AAA",axis:"#000"},curve:"curveLinear",margin:{top:20,right:20,bottom:20,left:40},points:{visibleSize:3,hoverSize:6},tooltip:{labels:!1},transition:{duration:350,ease:"easeLinear"}},influenceGenre:"overall",influenceCache:{}}},methods:{onDataLoaded:function(t){console.log("data did load"),console.log(t[0]),this.data=t,this.renderFilms(),this.filterTrends("",""),this.updateInfluences()},renderFilms:function(){var t=this,e=this.data,r=l["i"]().domain(l["e"](e,(function(e){return e[t.xProp]}))).range([5,this.svgWidth-5]),a=l["i"]().domain(l["e"](e,(function(e){return e[t.yProp]}))).range([this.svgHeight-5,5]),n=l["i"]().domain(l["e"](e,(function(e){return e[t.colorProp]}))).range([.1,1]),i=l["j"]().domain(this.categories).range(l["k"]);console.log(i);var s=this.dataGroup.selectAll("circle").data(e);s.enter().append("circle").attr("cx",(function(e){return r(e[t.xProp])})).attr("cy",(function(e){return a(e[t.yProp])})).attr("r",4).style("fill",(function(e){return l["b"](i(e.subject)).copy({opacity:n(e[t.colorProp])})})).on("mouseover",this.focusMovie),s.exit().remove()},type:function(t){return t.year=+t.year,t.length=+t.length,t.popularity=+t.popularity,this.movieTitles.push(t.title),this.categories.add(t.subject),this.recordPerson(this.directors,t.director,t),this.recordPerson(this.actors,t.actor,t),this.recordPerson(this.actresses,t.actress,t),t},recordPerson:function(t,e,r){""!==e&&(void 0===t[e]&&(t[e]={stars:[0,0,0,0,0],genres:{},movies:0}),t[e].movies+=1,t[e].stars[Math.floor(r.popularity/100*5)]+=1,void 0===t[e].genres[r.subject]?t[e].genres[r.subject]=1:t[e].genres[r.subject]+=1)},searchMovie:function(t){return this.movieTitles.filter((function(e){return-1!==e.toLowerCase().indexOf(t.toLowerCase())}))},submitMovieSearch:function(t){var e=this.data.filter((function(e){return e.title===t}))[0];this.focusMovie(e)},focusMovie:function(t){this.focused=t,this.drawPersonGenre(this.directors,t.director,"#dir-genre","dirNumMovies"),this.drawPersonGenre(this.actors,t.actor,"#atr-genre","atrNumMovies"),this.drawPersonGenre(this.actresses,t.actress,"#ats-genre","atsNumMovies"),this.drawPersonRating(this.directors,t.director,"#dir-rate"),this.drawPersonRating(this.actors,t.actor,"#atr-rate"),this.drawPersonRating(this.actresses,t.actress,"#ats-rate")},colorFromGenre:function(t){return l["k"][Array.from(this.categories).indexOf(t)]},drawPersonGenre:function(t,e,r,a){if(l["m"](r).html(""),""!==e){this[a]=t[e].movies;var n=t[e].genres,i=100,s=100,o=8,c=Math.min(i,s)/2-o,u=l["m"](r).append("svg").attr("width",i).attr("height",s).append("g").attr("transform","translate("+i/2+","+s/2+")"),d=l["j"]().domain(this.categories).range(l["k"]),f=l["h"]().value((function(t){return t.value})),v=f(l["d"](n));u.selectAll("whatever").data(v).enter().append("path").attr("d",l["a"]().innerRadius(0).outerRadius(c)).attr("fill",(function(t){return d(t.data.key)})).attr("stroke","black").style("stroke-width","2px").style("opacity",.7)}},drawPersonRating:function(t,e,r){if(l["m"](r).html(""),""!==e){var a=t[e].stars,n={one:a[0],two:a[1],three:a[2],four:a[3],five:a[4]},i=100,s=100,o=8,c=Math.min(i,s)/2-o,u=l["m"](r).append("svg").attr("width",i).attr("height",s).append("g").attr("transform","translate("+i/2+","+s/2+")"),d=l["j"]().domain(["one","two","three","four","five"]).range(l["l"][5]),f=l["h"]().value((function(t){return t.value})),v=f(l["d"](n));u.selectAll("whatever").data(v).enter().append("path").attr("d",l["a"]().innerRadius(0).outerRadius(c)).attr("fill",(function(t){return d(t.data.key)})).attr("stroke","black").style("stroke-width","2px").style("opacity",.7)}},getYear:function(t,e){var r=t[e];if(void 0===r){r={when:e};for(var a=Array.from(this.categories),n=0;n<a.length;n++)r[a[n]]=0;t[e]=r}return r},filterTrends:function(t,e){var r=this.data;""!==e&&(r=r.filter((function(r){return r[t]===e})));for(var a={},n=0;n<r.length;n++){var i=r[n],s=this.getYear(a,i.year);s[i.subject]+=1}var o=[];for(var l in a)o.push(a[l]);console.log(o),this.trendData=o},searchTrendOptions:function(t){var e=[];switch(this.trendFilterType){case"director":e=Object.keys(this.directors);break;case"actor":e=Object.keys(this.actors);break;case"actress":e=Object.keys(this.actresses);break}var r=t.toLowerCase();return e.filter((function(t){return-1!==t.toLowerCase().indexOf(r)}))},submitTrendSearch:function(t){this.filterTrends(this.trendFilterType,t)},calcInfluence:function(t){if(void 0!==this.influenceCache[t])return this.influenceCache[t];for(var e=this.data,r=Array.from(this.categories),a={},n=0;n<e.length;n++){var i=e[n],s=i[t];if(""!==s){var o=a[s];if(void 0===o){for(o={name:s,sumRatings:{overall:0},numMovies:{overall:0},avgRating:{overall:0}},n=0;n<r.length;n++)o.sumRatings[r[n]]=0,o.numMovies[r[n]]=0,o.avgRating[r[n]]=0;a[s]=o}o.numMovies.overall++,o.numMovies[i.subject]++,o.sumRatings[i.subject]+=i.popularity/100}}for(var l in a){var c=0;for(o=a[l],n=0;n<r.length;n++){var u=r[n];o.avgRating[u]=o.sumRatings[u]/o.numMovies[u],Number.isNaN(o.avgRating[u])&&(o.avgRating[u]=0),c+=o.avgRating[u]}o.avgRating.overall=c/r.length}var d=[];for(var f in a)d.push(a[f]);return this.influenceCache[t]=d,d},showInfluential:function(t,e,r){var a=this,n=this.calcInfluence(t);n=n.sort((function(t,e){return 1-t.avgRating[a.influenceGenre]>1-e.avgRating[a.influenceGenre]})).slice(0,4);var i=["overall"].concat(Array.from(this.categories)),s=n.map((function(t){return i.map((function(e){return{axis:e,value:t.avgRating[e]}}))}));l["m"](e).attr("width",700).attr("height",700),d.draw(e,s);var o=document.getElementById(r),c=n.map((function(t,e){return'<b style="background-color: '+l["k"][e]+';">'+e+"1."+t.name+"</b><br>"}));o.innerHTML="";for(var u=0;u<c.length;u++)o.innerHTML+=c[u]},updateInfluences:function(){this.showInfluential("director","#inf1","names1"),this.showInfluential("actor","#inf2","names2"),this.showInfluential("actress","#inf3","names3")}}},v=f,h=(r("94d5"),r("2877")),p=Object(h["a"])(v,s,o,!1,null,"59f7cafe",null),m=p.exports,g={name:"App",components:{FilmVis:m}},y=g,_=(r("034f"),Object(h["a"])(y,n,i,!1,null,null,null)),x=_.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(x)}}).$mount("#app")},"85ec":function(t,e,r){},"94d5":function(t,e,r){"use strict";var a=r("f6ad"),n=r.n(a);n.a},f6ad:function(t,e,r){}});
//# sourceMappingURL=app.821dfc6b.js.map